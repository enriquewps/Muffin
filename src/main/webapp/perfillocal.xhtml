<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">   
  <ui:composition template="/template/template.xhtml" >
    <ui:define name="content">
  

        
        
      <!-- Sección de información del Local onclick="window.location.replace('index.xhtml')"-->
      <p:panelGrid style="width: 100%">
        <p:row>
          <p:column rowspan="2" style="background-color: white;
                    border-right-color: transparent;
                    border-top-color: black;
                    border-top-width: medium;
                    border-left-color: black;
                    border-left-width: medium;
                    border-bottom-color: black;
                    border-bottom-width: medium;
                    width: 165px">

              
                            <p:graphicImage 
                  library="images"
                  rendered="#{!(comentarioController.local.foto ne null)}"
                            style="width:
                            165px;
                            height: auto"
                            name="logo.jpg" /> 
                            <h:graphicImage rendered="#{comentarioController.local.foto ne null}"
                                            value="data:image/png;base64,#{comentarioController.local.fotoUrl}"
                     
                       style="width: 165px;
                            height: auto"
                                   />
              

          </p:column>

          <p:column style="background-color: red; 
                    border-bottom-color: transparent;
                    border-right-color: transparent;
                    border-left-color: black;
                    border-left-width: medium;
                    border-top-color: black;
                    border-top-width: medium">
              <h:outputText value="#{comentarioController.local.nombre}"
                          style="color: white;
                          font-weight: bolder;
                          letter-spacing: 0.05cm;
                          font-size: large"/>
          </p:column>

          <p:column style="background-color: red;
                    border-bottom-color: transparent;
                    border-top-color: black;
                    border-top-width: medium;
                    border-right-color: black;
                    border-right-width: medium">
              <p:rating value="#{comentarioController.local.calificacion}"
                      style="float: right"
                      stars="5"
                      readonly="true"
                      cancel="false"/>
          </p:column>
        </p:row>


        <p:row>
          <p:column style="border-right-color: transparent;
                    border-left-color: black;
                    border-left-width: medium;
                    border-bottom-color: black;
                    border-bottom-width: medium">
              <h:outputText value="#{comentarioController.local.descripcion}"
                          style="font-weight: bold;
                          font-size: medium"/>

          </p:column>

          <p:column style="border-bottom-color: black;
                    border-bottom-width: medium;
                    border-right-color: black;
                    border-right-width: medium">

          </p:column>
        </p:row>
      </p:panelGrid>
            
            
	<br></br>
        
      <p:accordionPanel activeIndex="2">
      <p:tab title="Información del Local"
             titleStyle="font-size: large;
             background: red;
             text-color: white;
             text-shadow: none;">
                              
      <h:panelGrid columns="3" cellpadding="1">
          
        <p:outputLabel value="Recomendación: "
                         style="font-weight: bolder;
                         font-size: large"/>
        <p:outputLabel value="#{comentarioController.local.recomendacion.nombre}"
                       style="font-weight: bolder;
                       font-size: large" />
           <br/>
           
        <p:outputLabel value="Categorias: "
                         style="font-weight: bolder;
                         font-size: large"/>
        <p:outputLabel value="#{comentarioController.local.menu}"
                       style="font-weight: bolder;
                       font-size: large" />
           <br/>   

        <p:outputLabel  value="Precios:"
                        style="font-weight: bolder;
                        font-size: large"/>
        <p:outputLabel value="#{comentarioController.local.rangoInferior} ~ #{comentarioController.local.rangoSuperior}"
                       style="font-weight: bolder;
                       font-size: large"/>

        <br/>
        
        <p:column>
        <h:outputText value="Baño: " 
                      style="font-weight: bolder;
                      font-size: large"/>
        <h:outputText value="Si   " 
                      rendered="#{comentarioController.local.bano}"
                      style="font-weight: bolder;
                      font-size: large"/>
                <h:outputText value="No   " 
                      rendered="#{!comentarioController.local.bano}"
                      style="font-weight: bolder;
                      font-size: large"/>
        </p:column>

        <p:column>
        <h:outputText value="Estacionamiento: "
                      style="font-weight: bolder;
                      font-size: large"/>
        <h:outputText value="#{comentarioController.local.facultad.tipoEstacionamiento}" 
                      style="font-weight: bolder;
                      font-size: large"/>
        </p:column>


        <p:column>
        <h:outputText value="Internet: " 
                      style="font-weight: bolder;
                      font-size: large"/>
                <h:outputText value="No " rendered="#{!comentarioController.local.wifi}" 
                      style="font-weight: bolder;
                      font-size: large"/>
        <h:outputText value="Si " rendered="#{comentarioController.local.wifi}" 
                      style="font-weight: bolder;
                      font-size: large"/>
        </p:column>

        <p:outputLabel value="Bicipuma: "
                       style="font-weight: bolder;
                       font-size: large"/>
        <h:outputText value="#{comentarioController.local.facultad.paradasBicipuma}" 
                      style="font-weight: bolder;
                      font-size: large"/>

        <br/>
        <p:outputLabel value="Pumabus: "
                       style="font-weight: bolder;
                       font-size: large"/>
        <h:outputText value="#{comentarioController.local.facultad.paradasPumabus}" 
                      style="font-weight: bolder;
                      font-size: large"/>
        <br/>
        <p:outputLabel value="Metro: "
                       style="font-weight: bolder;
                       font-size: large"/>
        <h:outputText value="#{comentarioController.local.facultad.paradasMetro}" 
                      style="font-weight: bolder;
                      font-size: large"/>
        
        <br/>
        <p:outputLabel value="Metrobus: "
                       style="font-weight: bolder;
                       font-size: large"/>
        <h:outputText value="#{comentarioController.local.facultad.paradasMetrobus}" 
                      style="font-weight: bolder;
                      font-size: large"/>
        <br/>
        <p:outputLabel value="Facultad: "
                       style="font-weight: bolder;
                       font-size: large"/>
        <h:outputText value="#{comentarioController.local.facultad.nombreFac}" 
                      style="font-weight: bolder;
                      font-size: large"/>   
                
        <h:outputText value="#{comentarioController.local.comeOLleva}"
                      style="font-weight: bolder;
                      font-size: large"/>
      </h:panelGrid>
        
        
    
      </p:tab>
      </p:accordionPanel>
        
      <br/>
        
      <!-- Mapa del local -->
        
      <p:gmap id="gmap"
              center="19.3142052,-99.1835216"
              zoom="16" 
              type="HYBRID" 
              style="width:600px;height:400px"
             
              widgetVar="map"
              disableDoubleClickZoom="true"      
              ></p:gmap>
      <br/>
      <script type="text/javascript" 
              src="http://maps.googleapis.com/maps/api/js"/>
      <br/>
          
      <!-- Fin información locales -->
      <!-- Sección Comentarios -->
      <h:form id ="comentarios">
      <p:dataScroller value="#{comentarioController.local.comentarios}" var="com" chunkSize="20" mode="inline" scrollHeight="500" >
           <p:panelGrid style="width: 80%" >
        
        <!-- Comentario 1 -->
        <p:row>
          <p:column style="background-color: red; 
                    border-bottom-color: transparent;
                    border-right-color: transparent;
                    border-left-color: black;
                    border-left-width: medium;
                    border-top-color: black;
                    border-top-width: medium">
              <h:outputText value="#{com.usuario.nombre}"
                          style="color: white;
                          font-weight: bolder;
                          letter-spacing: 0.05cm;
                          font-size: large"/>
          </p:column>
          <p:column style="background-color: red;
                    border-bottom-color: transparent;
                    border-top-color: black;
                    border-top-width: medium;
                    border-right-color: black;
                    border-right-width: medium">
              <p:rating value="#{com.calificacion}"
                      style="float: right"
                      stars="5"
                      readonly="true"
                      cancel="false"/>
          </p:column>
        </p:row>
        <p:row>
          <p:column style="border-right-color: transparent;
                    border-left-color: black;
                    border-left-width: medium;
                    border-bottom-color: black;
                    border-bottom-width: medium">
              <h:outputText value="#{com.comentario}"
                          style="font-weight: bold;
                          font-size: medium"/>
          </p:column>
          <p:column style="border-bottom-color: black;
                    border-bottom-width: medium;
                    border-right-color: black;
                    border-right-width: medium" />
        </p:row>
           </p:panelGrid>
          </p:dataScroller>
          </h:form>
          
     
          
      <!-- Comentario del Usuario -->
      <h:form id="comentar" >
<p:growl id="messages" showDetail="true" />
      <p:panelGrid style="width: 80%">
        <p:row>
          <p:column style="background-color: red; 
                    border-bottom-color: transparent;
                    border-right-color: transparent;
                    border-left-color: black;
                    border-left-width: medium;
                    border-top-color: black;
                    border-top-width: medium">
              <h:outputText value="#{loginController.username}" style="color: white;
                                  font-weight: bolder;
                                  letter-spacing: 0.05cm;
                                  font-size: large"
                                  
                                  />
                  </p:column>
          <p:column style="background-color: red;
                    border-bottom-color: transparent;
                    border-top-color: black;
                    border-top-width: medium;
                    border-right-color: black;
                    border-right-width: medium">
              <p:rating id="calificacion" value="#{comentarioController.comentario.calificacion}"
                      style="float: right"
                      stars="5"
                      readonly="false"
                      cancel="false"/>
            
          </p:column>
        </p:row>
        <p:row >
          <p:column  style="border-right-color: transparent;
                    border-left-color: black;
                    border-left-width: medium;
                    border-bottom-color: black;
                    border-bottom-width: medium">
              <p:inputText id="comentario" value="#{comentarioController.comentario.comentario}" placeholder="Escribe tu comentario"
                           style="width: 150%;height:30px" maxlength="130"/>
          </p:column>
          <p:column style="border-bottom-color: black;
                    border-bottom-width: medium;
                    border-right-color: black;
                    border-right-width: medium" />
        </p:row>
      </p:panelGrid>

      <!-- Fin del comentario del usuario 
      <h:outputText value="Escribe tu comentario"
                          style="font-weight: bold;
                          font-size: medium"/>
      -->
          
          
          
      <!--Sección de Botones -->
      <br/>
      <h:panelGrid columns="4" columnClasses="logo,detail" rendered="#{loginController.loged}">
        <p:outputPanel>								
          <p:commandButton ajax="true" 
                           accesskey=""
                           style="-webkit-box-shadow: none!important;
                           -moz-box-shadow: none!important;
                           box-shadow: none!important;
                           background-image: none!important;
                           text-shadow: none!important;
                           color:white;
                           font-weight: bolder;
                           font-size: medium;
                           background-color: red"
                           value="Cancelar"
                           action="inicio"/>	
          <p:commandButton ajax="true"
                           style="-webkit-box-shadow: none!important;
                           -moz-box-shadow: none!important;
                           box-shadow: none!important;
                           background-image: none!important;
                           text-shadow: none!important;
                           color:white;
                           font-weight: bolder;
                           font-size: medium;
                           background-color: blue"
                           value="Enviar"
                           update =":comentarios"
                           actionListener="#{comentarioController.guardaComentario(loginController.username)}"
                           
                           />
          <p:commandButton ajax="true" 
                           style="-webkit-box-shadow: none!important;
                           -moz-box-shadow: none!important;
                           box-shadow: none!important;
                           background-image: none!important;
                           text-shadow: none!important;
                           color:white;
                           font-weight: bolder;
                           font-size: medium;
                           background-color: blue"
                                                      update =":comentarios"
                           actionListener="#{comentarioController.guardaComentario(loginController.username)}"
                           value="Comentar Facebook"
                           onclick="irUrl('https://www.facebook.com/dialog/feed?app_id=145634995501895&amp;display=popup&amp;link=https%3A%2F%developers.facebook.com%2Fdocs%2F&amp;redirect_uri=https://www.facebook.com/dialog/feed?app_id=145634995501895&amp;display=popup&amp;link=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2F&amp;redirect_uri=https://developers.facebook.com/tools/explorer&amp;name= NOmbre del local&amp;description='+'#{comentarioController.local.nombre} '+getComentario($('input[id=&quot;comentar:comentario&quot;]')[0].value))"/>
                           
                           <!--onclick="irUrl('https://www.facebook.com/dialog/feed?app_id=145634995501895&amp;display=popup&amp;link=https%3A%2F%developers.facebook.com%2Fdocs%2F&amp;redirect_uri=https://www.facebook.com/dialog/feed?app_id=145634995501895&amp;display=popup&amp;link=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2F&amp;redirect_uri=https://developers.facebook.com/tools/explorer&amp;name= NOmbre del local&amp;description='+getComentario($('input[id=&quot;comentario&quot;]')[0].value))"/>
-->
          <p:commandButton ajax="true" 
                           style="-webkit-box-shadow: none!important;
                           -moz-box-shadow: none!important;
                           box-shadow: none!important;
                           background-image: none!important;
                           text-shadow: none!important;
                           color:white;
                           font-weight: bolder;
                           font-size: medium;
                           background-color: blue"
                           update =":comentarios"
                           actionListener="#{comentarioController.guardaComentario(loginController.usernameloginController.username)}"
                           value="Comentar Twitter"
                           onclick="Alerta('#{comentarioController.local.nombre}'+getComentario($('input[id=&quot;comentar:comentario&quot;]')[0].value))"
                           />
        </p:outputPanel>
      </h:panelGrid>
      </h:form>
      <!-- Fin seccion de botones -->
        
    </ui:define>
  </ui:composition>
</html>
