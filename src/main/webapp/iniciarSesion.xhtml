<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">    
  <ui:composition template="/template/template.xhtml" >
    <ui:define name="content">
      <h2>Inicio Sesion</h2>
      <h:form id = "isesion">
        <h:panelGrid columns="2" cellpadding="1">
          <!-- Nombre -->
          <p:outputLabel  value=""/>
          <p:outputLabel  value="" />

		  
		  <p:outputLabel  value="" />
		  <p:outputLabel  value="" />
                  
                                  <h:panelGrid rendered="#{!loginController.loged}">
                    <form action="#{facesContext.externalContext.requestContextPath}/j_spring_security_check" method="POST">
                        Usuario:<input type="text" name="j_username"/>
                        Password:<input type="password" name="j_password"/>
                        <input name="submit" type="submit" value="Login"/>
                    </form>
                </h:panelGrid>
                 <h:panelGrid rendered="#{loginController.loged}">
                    <h:form>
                        <p>User:#{loginController.username}(#{loginController.rol})</p>
                        <a href="#{facesContext.externalContext.requestContextPath}/j_spring_security_logout" >Cerrar Session</a>
                    </h:form>
                </h:panelGrid>
				  <!-- Nombre Usuario -->
		  <p:outputLabel value="Nombre Usuario"
                                 style="font-size: medium;
                                 font-weight: bolder"/>
                  <p:inputText id="j_username" value ="#{usuarioController.usuarioRegistro.nombre}" required="true"/>
		  <p:message for="j_username"/>
		  <br/>

		  
		  
		  <!-- Contrasena -->
		  
	                  
			<p:outputLabel  value="Contrasena: "
                                        style="font-size: medium;
                                        font-weight: bolder"/>
                        <p:password id="j_password" value ="#{usuarioController.usuarioRegistro.contrasena}" label="Password 1" required="true" />
		  <br/><br/>
		  <p:commandLink id="btnrecuperarcontrasena"
                                 onclick="window.location.replace('recuperarcontrasena.xhtml')"> 
				<h:outputText value="Recuperar Contrasena    "  />
		   </p:commandLink>
		  
		</h:panelGrid>
                
		
		<!-- Seccion de Botones -->
                <!-- Cancelar -->
                <p:commandButton ajax="false" 
                             value="Cancelar"
                             style="-webkit-box-shadow: none!important;
                                  -moz-box-shadow: none!important;
                                  box-shadow: none!important;
                                  background-image: none!important;
                                  text-shadow: none!important;
                                 color:white;
                                 font-weight: bolder;
                                 font-size: medium;
                                 background-color: red"
                             onclick="window.location.replace('index.xhtml')"
				/>	
				
				<p:commandButton 
                             value="Iniciar Sesion"
                             style="-webkit-box-shadow: none!important;
                                  -moz-box-shadow: none!important;
                                  box-shadow: none!important;
                                  background-image: none!important;
                                  text-shadow: none!important;
                                 color:white;
                                 font-weight: bolder;
                                 font-size: medium;
                                 background-color: blue"
                                 action="#{loginController.log}"
                                 actionListener="#{usuarioController.iniciarSesion()}"
                                 update="isesion"
				/>	
                                
            </h:form>
            
        </ui:define>
    </ui:composition>
</html>
